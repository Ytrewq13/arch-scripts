#!/bin/sh

set -xe

# Check we are root
[ "$(id -u)" -eq 0 ] || {
    echo "Error: must be run as root" 1>&2
    exit 1
}

# Update archlinux keyring
pacman -Sy --noconfirm archlinux-keyring

# Install everything
pacman -S --noconfirm android-tools arduino aria2 aspell aspell-en astyle audacity autoconf automake base bash bash-completion bc bear biber bind binutils blueman bluez bluez-utils check cifs-utils clang clinfo cmake colordiff confuse conky convmv coreutils cpulimit cronie cryptsetup ctags cups curl darktable dash dbus dhcpcd dictd diffutils discord dkms dmenu dmidecode dnsmasq docker dos2unix dosbox doxygen dunst e2fsprogs ed editorconfig-core-c element-web elfutils enscript entr evtest exa exfat-utils expect fakeroot fcitx fcitx-configtool fcitx-libpinyin fcitx-qt5 fd feh ffmpeg figlet file filesystem filezilla findutils fio flac flake8 flameshot flex fontconfig fontforge freerdp frei0r-plugins fuse-common fuseiso fzf gamemode gawk gcc gcc-fortran gdb gdb-common gettext ghc ghc-libs ghostscript giflib gimp git glibc gmp gnu-free-fonts gnu-netcat gnupg gnuplot gpart gparted gphoto2 graphviz grep groff grpc gsl gstreamer gutenprint gv gvfs gvfs-mtp gzip hashcat haskell-language-server hdparm hlint htop i3-gaps i3blocks i3lock i3status imagemagick imlib2 inetutils iotop ipcalc iperf3 iproute2 iputils jack2 java-commons-lang jdk-openjdk jdk11-openjdk jdk8-openjdk jq jre11-openjdk kdenlive krita ledger less lf libclc libreoffice-fresh libva-utils licenses lightdm lightdm-gtk-greeter lighttpd linux linux-firmware linux-headers lld llvm lm_sensors lolcat lshw lsof lxc m4 make man-db man-pages mediainfo mesa minted mkinitcpio mktorrent mlocate monero monero-gui moreutils mpfr mpv mtr mumble murmur mypaint mypaint-brushes nasm ncompress ncurses ndiswrapper ndiswrapper-dkms neofetch net-snmp netctl nethogs network-manager-applet networkmanager networkmanager-openvpn nfs-utils nm-connection-editor nmap noto-fonts noto-fonts-cjk noto-fonts-emoji npm nss-mdns ntfs-3g ntp nvtop obs-studio opencl-clhpp opencl-headers opencv opendoas openssh openssl openvpn opus p7zip pacman pacman-mirrorlist pam pandoc paprefs parallel parted patch pavucontrol pax-utils pciutils pcre pcre2 pdfpc perl perl-anyevent perl-anyevent-i3 perl-xml-parser php7 picom pipewire pipewire-pulse pkgconf polkit polkit-kde-agent poppler prison pulseaudio-bluetooth py3status python python-numpy python-opencv python-pip python-sphinx qemu-desktop qemu-emulators-full qemu-img qemu-tools qpdf qrencode r radare2 rawtherapee readline reptyr ripgrep rizin rofi rofimoji rrdtool rsync rz-cutter rz-ghidra screen screenkey sdl2 sed shellcheck smartmontools smbclient sox spice spice-gtk starship steam sudo syntax-highlighting sysbench systemd tar tcpdump terminator termshark testdisk texinfo texlive-bibtexextra texlive-bin texlive-core texlive-fontsextra texlive-langchinese texlive-langextra texlive-latexextra texlive-pictures texlive-science the_silver_searcher tk tmux tor torbrowser-launcher tree ttf-hannom uncrustify units unzip util-linux v4l-utils v4l2loopback-dkms v4l2loopback-utils valgrind vdpauinfo vim-runtime virt-manager virt-viewer vkd3d vulkan-extra-layers vulkan-extra-tools vulkan-headers vulkan-html-docs vulkan-validation-layers wget which whois wine winetricks wireless_tools wpa_supplicant x264 x265 xclip xdg-user-dirs xdg-utils xdot xdotool xf86-input-libinput xf86-input-wacom xkeyboard-config xorg-fonts-encodings xorg-server xorg-server-common xorg-server-xvfb xorg-setxkbmap xorg-xauth xorg-xev xorg-xfd xorg-xhost xorg-xinit xorg-xinput xorg-xkbcomp xorg-xkill xorg-xmodmap xorg-xprop xorg-xrandr xorg-xrdb xorg-xset xorg-xsetroot xorgproto yt-dlp zathura zathura-djvu zathura-pdf-mupdf zathura-ps zip

# FIXME: read packages from somewhere? (environment variables set prior to running script?)
